{"version":3,"file":"auth.js","sourceRoot":"","sources":["../../src/auth.ts"],"names":["unlocker","ownerMiddleware","decryptMacaroon","base64ToHex","sleep","authModule"],"mappings":"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"}